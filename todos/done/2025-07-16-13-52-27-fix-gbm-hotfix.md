# Fix gbm hotfix

**Status:** Done
**Agent PID:** 50911

## Original Todo
- fix `gbm hotfix`
    * the Jira integration autocompletion is not quite correct:
        - First argument autocompletion is correct and results in filling out just the JIRA ticket number
        - Second argument autocompletion pops the same jira values - which is wrong. It should operate the same way as `gbm add` and the second argument should complete with the JIRA summary.
        - The resulting branch is messed up (note branch name below - should be hotfix/INGSVC-5638_EMAIL_Invalid_Date_7_16_2025_13_00_00
        ```sh
ó°€µ jschneider  ~/code/scratch/email_ingester   master
  gbm hf INGSVC-5638 INGSVC-5638
ğŸ’¡ Using production branch 'master' as base for hotfix
ğŸ’¡ Creating hotfix worktree 'HOTFIX_INGSVC-5638' on branch 'hotfix/bug/INGSVC-5638_EMAIL_Invalid_Date_7_16_2025_13_00_00'
ğŸ’¡ Hotfix worktree 'HOTFIX_INGSVC-5638' added successfully
ğŸ’¡ Remember to merge back through the deployment chain: master â†’ preview â†’ main

ó°€µ jschneider  ~/code/scratch/email_ingester   master
  gbm list
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      WORKTREE      â”‚                            BRANCH                            â”‚ GIT STATUS â”‚ SYNC STATUS â”‚                                    PATH                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ master             â”‚ master                                                       â”‚ âœ“          â”‚ âœ… IN_SYNC  â”‚ /Users/jschneider/code/scratch/email_ingester/worktrees/master             â”‚
â”‚ production         â”‚ production-2025-07-1                                         â”‚ âœ“          â”‚ âœ… IN_SYNC  â”‚ /Users/jschneider/code/scratch/email_ingester/worktrees/production         â”‚
â”‚ HOTFIX_INGSVC-5638 â”‚ hotfix/bug/INGSVC-5638_EMAIL_Invalid_Date_7_16_2025_13_00_00 â”‚ âœ“          â”‚ UNTRACKED   â”‚ /Users/jschneider/code/scratch/email_ingester/worktrees/HOTFIX_INGSVC-5638 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ Run 'gbm sync' to synchronize changes%
```

## Description
Fix the `gbm hotfix` command's JIRA integration to match `gbm add` behavior. The second argument should autocomplete with the JIRA summary of the ticket selected as the first argument, and branch names should have correct `hotfix/` prefix without extra path components.

## Implementation Plan
- [x] Fix hotfix command autocompletion logic in `cmd/hotfix.go:89-111` to match `gbm add` pattern
- [x] Fix branch name prefix replacement in `generateHotfixBranchName()` at `cmd/hotfix.go:183-217` 
- [x] Test autocompletion behavior with JIRA tickets
- [x] Test branch naming generates correct `hotfix/` prefix
- [x] Verify hotfix command works same as add command for JIRA integration
- [x] Fix linter errors in cmd package
- [x] Store and retrieve actual base branch information for hotfix worktrees in info command
- [x] Fix Branch field in info command to show full JIRA branch name instead of truncated version

## Notes
[Implementation notes]